{% extends "base.html" %}

{% block content %}
<div class="toolbar">
  <div class="toolbar-left">
    <div class="topbar">
      <img src="/static/img/1.png" alt="logo" class="logo-image" />
      <span class="logo-title">DD::5::KA</span>
      <span class="logo-subtitle">(Drone detector – SETKOMET)</span>
    </div>
  </div>
  <div class="toolbar-right">
    <button id="btn-start" class="btn btn-primary" data-action="start">START detect</button>
    <button id="btn-stop" class="btn btn-danger" data-action="stop">STOP detect</button>
    <button id="btn-restart" class="btn btn-warning" data-action="restart">RESTART SERVICE</button>
    <button id="btn-led" class="btn btn-accent" data-action="led">LED</button>
  </div>
</div>

<div class="layout-3col">
  <!-- ЛЕВАЯ ПАНЕЛЬ: НАВИГАЦИЯ -->
  <aside class="left-panel nav-panel">
    <div class="panel-header"><h3>Навигация</h3></div>
    <div class="nav-list">
      <button class="nav-btn is-active" data-view="stream">Стрим</button>
      <button class="nav-btn" data-view="photos">Фото детекций</button>
      <button class="nav-btn" data-view="settings">Настройки</button>
    </div>
  </aside>

  <!-- ЦЕНТР: ОКНО КОНТЕНТА (3 вьюшки) -->
  <main class="center-panel">
    <!-- Стрим -->
    <section id="view-stream">
      <div class="stream-container">
        <div class="stream-wrapper">
          <div class="stream-aspect-container">
            <div class="overlay-container">
              <img id="overlay" src="/overlay.mjpg" alt="Live Stream" />
              <div id="overlay-fallback" class="hidden">
                <img src="/static/img/2.png" class="fallback-image" alt="fallback">
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Фото детекций (заглушка) -->
    <section id="view-photos" class="hidden-view">
      <div class="placeholder-card">
        <h3>Галерея детекций</h3>
        <p>Галерея детекций будет добавлена на следующем шаге</p>
      </div>
    </section>

    <!-- Настройки (заглушка) -->
    <section id="view-settings" class="hidden-view">
      <div class="placeholder-card">
        <h3>Настройки системы</h3>
        <p>Страница настроек будет добавлена на следующем шаге</p>
      </div>
    </section>
  </main>

  <!-- ПРАВАЯ ПАНЕЛЬ: ЛОГИ -->
  <aside class="right-panel logs-panel">
    <div class="panel-header"><h3>Последние события</h3></div>
    <div id="events-list" class="events-list">
      <div class="event-item">
        <span class="event-time">—</span>
        <span class="event-class">—</span>
        <span class="event-conf">—</span>
        <span class="event-bbox">—</span>
      </div>
    </div>
  </aside>
</div>

<!-- НИЖНЯЯ СТРОКА СТАТУСАМИ (4 ИНДИКАТОРА В РЯД) -->
<footer class="status-bar">
  <div class="status-cell">
    <span class="label">Сервис запущен</span>
    <div id="detector-status" class="status-dot bad"></div>
  </div>
  <div class="status-cell">
    <span class="label">Камера готова</span>
    <div id="camera-status" class="status-dot bad"></div>
  </div>
  <div class="status-cell">
    <span class="label">LED ожидает</span>
    <div id="led-status" class="status-dot bad"></div>
  </div>
  <div class="status-cell">
    <span class="label">Сеткомет готов</span>
    <div id="setkomet-status" class="status-dot bad"></div>
  </div>
</footer>

<div id="toast" class="toast hidden"></div>
{% endblock %}

<!-- CHANGELOG -->
<!-- Архитектура: навигация слева; центр=стрим; справа=логи; низ=4 статуса в ряд. Верхняя навигация удалена. -->
<!-- Этап 2: SPA-переключение вью (стрим/фото/настройки) с заглушками. -->